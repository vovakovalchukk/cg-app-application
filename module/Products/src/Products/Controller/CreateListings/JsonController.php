<?php

namespace Products\Controller\CreateListings;

use Application\Controller\AbstractJsonController;
use CG\Account\Client\Service as AccountService;
use CG\Account\Shared\Entity as Account;
use CG\Permission\Exception as PermissionException;
use CG\Stdlib\Exception\Runtime\NotFound;
use CG_UI\View\Prototyper\JsonModelFactory;
use Products\Listing\Channel\Service as ChannelService;
use Products\Listing\Exception as ListingException;

class JsonController extends AbstractJsonController
{
    const ROUTE_CREATE_LISTINGS = 'CreateListings';
    const ROUTE_DEFAULT_SETTINGS = 'DefaultSettings';
    const ROUTE_CATEGORY_DEPENDENT_FIELD_VALUES = 'CategoryDependentFieldValues';
    const ROUTE_ACCOUNT_SPECIFIC_FIELD_VALUES = 'AccountSpecificFieldValues';
    const ROUTE_CATEGORY_CHILDREN = 'CategoryChildren';
    const ROUTE_REFRESH_CATEGORIES = 'RefreshCategories';

    /** @var AccountService */
    protected $accountService;
    /** @var ChannelService */
    protected $channelService;

    public function __construct(
        JsonModelFactory $jsonModelFactory,
        AccountService $accountService,
        ChannelService $channelService
    ) {
        parent::__construct($jsonModelFactory);
        $this->accountService = $accountService;
        $this->channelService = $channelService;
    }

    public function defaultSettingsAjaxAction()
    {
        try {
            $defaultSettings = $this->channelService->getDefaultSettingsForAccount($this->fetchAccountFromRoute());
            if (empty(array_filter($defaultSettings))) {
                return $this->buildErrorResponse('NO_SETTINGS');
            }
            return $this->buildResponse($defaultSettings);
        } catch (ListingException $e) {
            return $this->buildErrorResponse($e->getMessage());
        } catch (\Throwable $e) {
            return $this->buildGenericErrorResponse();
        }
    }

    public function channelSpecificFieldValuesAction()
    {
        try {
            return $this->buildResponse($this->channelService->getChannelSpecificFieldValues(
                $this->fetchAccountFromRoute()
            ));
        } catch (ListingException $e) {
            return $this->buildErrorResponse($e->getMessage());
        } catch (\Throwable $e) {
            return $this->buildGenericErrorResponse();
        }
    }

    public function categoryDependentFieldValuesAction()
    {
        if ($this->getCategoryIdFromRoute() == 3197) {
            return $this->jsonModelFactory->newInstance(json_decode("{\"listingDuration\":{\"Days_3\":\"3 Days\",\"Days_5\":\"5 Days\",\"Days_7\":\"7 Days\",\"Days_10\":\"10 Days\",\"Days_30\":\"30 Days\",\"GTC\":\"GTC\"},\"itemSpecifics\":{\"required\":{\"Shoe Size\":{\"type\":\"textselect\",\"options\":{\"UK 1\":\"UK 1\",\"UK 2\":\"UK 2\",\"UK 2.5\":\"UK 2.5\",\"UK 3\":\"UK 3\",\"UK 3.5\":\"UK 3.5\",\"UK 4\":\"UK 4\",\"UK 4.5\":\"UK 4.5\",\"UK 5\":\"UK 5\",\"UK 5.5\":\"UK 5.5\",\"UK 6\":\"UK 6\",\"UK 6.5\":\"UK 6.5\",\"UK 7\":\"UK 7\",\"UK 7.5\":\"UK 7.5\",\"UK 8\":\"UK 8\",\"UK 8.5\":\"UK 8.5\",\"UK 9\":\"UK 9\",\"UK 9.5\":\"UK 9.5\",\"UK 10\":\"UK 10\",\"UK 10.5\":\"UK 10.5\",\"UK 11\":\"UK 11\",\"UK 11.5\":\"UK 11.5\",\"UK 12\":\"UK 12\",\"UK 12.5\":\"UK 12.5\",\"UK 13\":\"UK 13\",\"UK 13.5\":\"UK 13.5\",\"UK 14\":\"UK 14\",\"UK 14.5\":\"UK 14.5\",\"UK 15\":\"UK 15\",\"UK 15.5\":\"UK 15.5\",\"UK 16\":\"UK 16\",\"UK 16.5\":\"UK 16.5\",\"UK 17\":\"UK 17\",\"UK 17.5\":\"UK 17.5\",\"UK 18\":\"UK 18\",\"UK 18.5\":\"UK 18.5\",\"UK 19\":\"UK 19\"},\"minValues\":1,\"maxValues\":1},\"Brand\":{\"type\":\"textselect\",\"options\":{\"Unbranded\":\"Unbranded\",\"adidas\":\"adidas\",\"Nike\":\"Nike\",\"Timberland\":\"Timberland\",\"Clarks\":\"Clarks\",\"PUMA\":\"PUMA\",\"Converse\":\"Converse\",\"VANS\":\"VANS\",\"Dr. Martens\":\"Dr. Martens\",\"CAT\":\"CAT\",\"Reebok\":\"Reebok\",\"Grenson\":\"Grenson\",\"Hi-Tec\":\"Hi-Tec\",\"ASICS\":\"ASICS\",\"Lacoste\":\"Lacoste\",\"Moccasin\":\"Moccasin\",\"Onitsuka Tiger\":\"Onitsuka Tiger\",\"Rockport\":\"Rockport\",\"Merrell\":\"Merrell\",\"Dunlop\":\"Dunlop\",\"etnies\":\"etnies\",\"Patagonia\":\"Patagonia\",\"883 Police\":\"883 Police\",\"Abercrombie \u0026 Fitch\":\"Abercrombie \u0026 Fitch\",\"Acne\":\"Acne\",\"Acupuncture\":\"Acupuncture\",\"Aigle\":\"Aigle\",\"Airsoft\":\"Airsoft\",\"AIRWALK\":\"AIRWALK\",\"Aldo\":\"Aldo\",\"Alexander McQueen\":\"Alexander McQueen\",\"Alexon\":\"Alexon\",\"Allen Edmonds\":\"Allen Edmonds\",\"AllSaints\":\"AllSaints\",\"AND1\":\"AND1\",\"Animal\":\"Animal\",\"Antonio Maurizi\":\"Antonio Maurizi\",\"Antony Morato\":\"Antony Morato\",\"ARMANI\":\"ARMANI\",\"Ascot\":\"Ascot\",\"Ask the Missus\":\"Ask the Missus\",\"ASOS\":\"ASOS\",\"Azor\":\"Azor\",\"Bally\":\"Bally\",\"Baracuta\":\"Baracuta\",\"Barbie\":\"Barbie\",\"Barbour\":\"Barbour\",\"Barker\":\"Barker\",\"Base London\":\"Base London\",\"Bata\":\"Bata\",\"Be\u0026D\":\"Be\u0026D\",\"Belstaff\":\"Belstaff\",\"Ben Sherman\":\"Ben Sherman\",\"Berghaus\":\"Berghaus\",\"Berkertex\":\"Berkertex\",\"Bertie\":\"Bertie\",\"BHS\":\"BHS\",\"Billabong\":\"Billabong\",\"Birkenstock\":\"Birkenstock\",\"Birki\u0027s\":\"Birki\u0027s\",\"Blackstone\":\"Blackstone\",\"Blue Harbour\":\"Blue Harbour\",\"Boden\":\"Boden\",\"Boohoo\":\"Boohoo\",\"Bostonian\":\"Bostonian\",\"Bottesini\":\"Bottesini\",\"Boxfresh\":\"Boxfresh\",\"Brett \u0026 Sons\":\"Brett \u0026 Sons\",\"British Knights\":\"British Knights\",\"Bronx\":\"Bronx\",\"Bruno Bordese\":\"Bruno Bordese\",\"Bullboxer\":\"Bullboxer\",\"Burberry\":\"Burberry\",\"Burton\":\"Burton\",\"BUSCEMI\":\"BUSCEMI\",\"Buttero\":\"Buttero\",\"C.P. Company\":\"C.P. Company\",\"C1RCA\":\"C1RCA\",\"Calvin Klein\":\"Calvin Klein\",\"Camel Active\":\"Camel Active\",\"Camper\":\"Camper\",\"Canterbury\":\"Canterbury\",\"Carlo Rasolli\":\"Carlo Rasolli\",\"Car Shoe\":\"Car Shoe\",\"Cedar Wood State\":\"Cedar Wood State\",\"Cesare Paciotti\":\"Cesare Paciotti\",\"Chaps\":\"Chaps\",\"Charles Tyrwhitt\":\"Charles Tyrwhitt\",\"Chatham\":\"Chatham\",\"Cheaney\":\"Cheaney\",\"Dior\":\"Dior\",\"Christian Louboutin\":\"Christian Louboutin\",\"Church\":\"Church\",\"CIRCA\":\"CIRCA\",\"CLAE\":\"CLAE\",\"Clifford James\":\"Clifford James\",\"Coast\":\"Coast\",\"Cole Haan\":\"Cole Haan\",\"Columbia\":\"Columbia\",\"COMMON PROJECTS\":\"COMMON PROJECTS\",\"Contour\":\"Contour\",\"Coolers\":\"Coolers\",\"Cosyfeet\":\"Cosyfeet\",\"Cotton Traders\":\"Cotton Traders\",\"CR\":\"CR\",\"Crockett \u0026 Jones\":\"Crockett \u0026 Jones\",\"Crocs\":\"Crocs\",\"Crosshatch\":\"Crosshatch\",\"Cruyff\":\"Cruyff\",\"Cushe\":\"Cushe\",\"Cushion Walk\":\"Cushion Walk\",\"Daniele Alessandrini\":\"Daniele Alessandrini\",\"DC\":\"DC\",\"DC Shoes\":\"DC Shoes\",\"Debenhams\":\"Debenhams\",\"Debut\":\"Debut\",\"DEK\":\"DEK\",\"Delicious Junction\":\"Delicious Junction\",\"Demonia\":\"Demonia\",\"DEWALT\":\"DEWALT\",\"Diadora\":\"Diadora\",\"Diesel\":\"Diesel\",\"Disney\":\"Disney\",\"DJINN\u0027S\":\"DJINN\u0027S\",\"DOCKERS\":\"DOCKERS\",\"Dolce\u0026Gabbana\":\"Dolce\u0026Gabbana\",\"Dorothy Perkins\":\"Dorothy Perkins\",\"Dr. Keller\":\"Dr. Keller\",\"Dr. Scholl\u0027s\":\"Dr. Scholl\u0027s\",\"DRIES VAN NOTEN\":\"DRIES VAN NOTEN\",\"Dsquared2\":\"Dsquared2\",\"Dubarry\":\"Dubarry\",\"Dune\":\"Dune\",\"DVS\":\"DVS\",\"ECCO\":\"ECCO\",\"Ed Hardy\":\"Ed Hardy\",\"Eleven Paris\":\"Eleven Paris\",\"ellesse\":\"ellesse\",\"El Naturalista\":\"El Naturalista\",\"Emerica\":\"Emerica\",\"Emporio Armani\":\"Emporio Armani\",\"Energie\":\"Energie\",\"\u00e9S\":\"\u00e9S\",\"Etienne Ozeki\":\"Etienne Ozeki\",\"F\u0026F\":\"F\u0026F\",\"Farah\":\"Farah\",\"Fat Face\":\"Fat Face\",\"Fenchurch\":\"Fenchurch\",\"Fendi\":\"Fendi\",\"Feud\":\"Feud\",\"ffoR\":\"ffoR\",\"FILA\":\"FILA\",\"Fiore\":\"Fiore\",\"Firetrap\":\"Firetrap\",\"FISH \u0027N\u0027 Chips\":\"FISH \u0027N\u0027 Chips\",\"FitFlop\":\"FitFlop\",\"Florsheim\":\"Florsheim\",\"Flossy Style\":\"Flossy Style\",\"Fluchos\":\"Fluchos\",\"Fly Flot\":\"Fly Flot\",\"FLY London\":\"FLY London\",\"FootJoy\":\"FootJoy\",\"Fox\":\"Fox\",\"Frank Wright\":\"Frank Wright\",\"Fratelli Rossetti\":\"Fratelli Rossetti\",\"Fred Perry\":\"Fred Perry\",\"French Connection\":\"French Connection\",\"Front\":\"Front\",\"Fruit of the Loom\":\"Fruit of the Loom\",\"Frye\":\"Frye\",\"Gaastra\":\"Gaastra\",\"GANT\":\"GANT\",\"Generic Surplus\":\"Generic Surplus\",\"George\":\"George\",\"Geox\":\"Geox\",\"Gibson\":\"Gibson\",\"Gildan\":\"Gildan\",\"Gio-Goi\":\"Gio-Goi\",\"Giovanni\":\"Giovanni\",\"Giuseppe Zanotti\":\"Giuseppe Zanotti\",\"GLTH\":\"GLTH\",\"Gola\":\"Gola\",\"Golden Goose\":\"Golden Goose\",\"Goodwin Smith\":\"Goodwin Smith\",\"Goor\":\"Goor\",\"Gordini\":\"Gordini\",\"Grafters\":\"Grafters\",\"Gram\":\"Gram\",\"Gravis\":\"Gravis\",\"Gringos\":\"Gringos\",\"Grisport\":\"Grisport\",\"Groundwork\":\"Groundwork\",\"G-Star\":\"G-Star\",\"Gucci\":\"Gucci\",\"GUESS\":\"GUESS\",\"Gumbies\":\"Gumbies\",\"H\u0026M\":\"H\u0026M\",\"Hackett\":\"Hackett\",\"Hamells\":\"Hamells\",\"Hanes\":\"Hanes\",\"Harley-Davidson\":\"Harley-Davidson\",\"Havaianas\":\"Havaianas\",\"H by Hudson\":\"H by Hudson\",\"Helly Hansen\":\"Helly Hansen\",\"Henleys\":\"Henleys\",\"Henri Lloyd\":\"Henri Lloyd\",\"HERM\u00c8S\":\"HERM\u00c8S\",\"Hexagone Pellet\":\"Hexagone Pellet\",\"Hogan\":\"Hogan\",\"Homeys\":\"Homeys\",\"Hotter\":\"Hotter\",\"House of Fraser\":\"House of Fraser\",\"HUGO BOSS\":\"HUGO BOSS\",\"Hummel\":\"Hummel\",\"Hunter\":\"Hunter\",\"Hush Puppies\":\"Hush Puppies\",\"Ikon\":\"Ikon\",\"I Love Shoes\":\"I Love Shoes\",\"Imac\":\"Imac\",\"Irregular Choice\":\"Irregular Choice\",\"JACK \u0026 JONES\":\"JACK \u0026 JONES\",\"Jack Pyke\":\"Jack Pyke\",\"Jaeger\":\"Jaeger\",\"Japan Rags\":\"Japan Rags\",\"Jasper Conran\":\"Jasper Conran\",\"JCB\":\"JCB\",\"Jeffery~West\":\"Jeffery~West\",\"Jhung Yuro\":\"Jhung Yuro\",\"Jil Sander\":\"Jil Sander\",\"Jimmy Choo\":\"Jimmy Choo\",\"J.Lindeberg\":\"J.Lindeberg\",\"John Lewis\":\"John Lewis\",\"John Lobb\":\"John Lobb\",\"John Spencer\":\"John Spencer\",\"Johnston \u0026 Murphy\":\"Johnston \u0026 Murphy\",\"John White\":\"John White\",\"Joker\":\"Joker\",\"Jones\":\"Jones\",\"Jordan\":\"Jordan\",\"Josef Seibel\":\"Josef Seibel\",\"Juju\":\"Juju\",\"Jump\":\"Jump\",\"Just Sheepskin\":\"Just Sheepskin\",\"KangaROOS\":\"KangaROOS\",\"Kangol\":\"Kangol\",\"Kappa\":\"Kappa\",\"Karrimor\":\"Karrimor\",\"Keds\":\"Keds\",\"KEEN\":\"KEEN\",\"Keep\":\"Keep\",\"Kenneth Cole\":\"Kenneth Cole\",\"KENZO\":\"KENZO\",\"Kickers\":\"Kickers\",\"Koah\":\"Koah\",\"Kost\":\"Kost\",\"K-Swiss\":\"K-Swiss\",\"Kurt Geiger\":\"Kurt Geiger\",\"Ladybird\":\"Ladybird\",\"Lakai\":\"Lakai\",\"Lambretta\":\"Lambretta\",\"Lanvin\":\"Lanvin\",\"La Sportiva\":\"La Sportiva\",\"le coq sportif\":\"le coq sportif\",\"Lee Cooper\":\"Lee Cooper\",\"Levi\u0027s\":\"Levi\u0027s\",\"Loake\":\"Loake\",\"Lonsdale\":\"Lonsdale\",\"Lotto\":\"Lotto\",\"Lotus\":\"Lotus\",\"Louis Vuitton\":\"Louis Vuitton\",\"LOWA\":\"LOWA\",\"Lyle \u0026 Scott\":\"Lyle \u0026 Scott\",\"Macbeth\":\"Macbeth\",\"MADFOOT!\":\"MADFOOT!\",\"Magnum\":\"Magnum\",\"Marks and Spencer\":\"Marks and Spencer\",\"Maison Martin Margiela\":\"Maison Martin Margiela\",\"Marvel\":\"Marvel\",\"Massimo Dutti\":\"Massimo Dutti\",\"Mavericks\":\"Mavericks\",\"MBT\":\"MBT\",\"M\u00e9duse\":\"M\u00e9duse\",\"Meindl\":\"Meindl\",\"MELVIN \u0026 HAMILTON\":\"MELVIN \u0026 HAMILTON\",\"Memphis One\":\"Memphis One\",\"Mephisto\":\"Mephisto\",\"Mercury\":\"Mercury\",\"Mil-Tec\":\"Mil-Tec\",\"Mocks\":\"Mocks\",\"Modshoes\":\"Modshoes\",\"Mokkers\":\"Mokkers\",\"Momentum\":\"Momentum\",\"Monsoon\":\"Monsoon\",\"Moreschi\":\"Moreschi\",\"Moschino\":\"Moschino\",\"Moshulu\":\"Moshulu\",\"Mr. Hare\":\"Mr. Hare\",\"Mulberry\":\"Mulberry\",\"Mustang\":\"Mustang\",\"MUSTO\":\"MUSTO\",\"Nanny State\":\"Nanny State\",\"Naot\":\"Naot\",\"Narrative\":\"Narrative\",\"Native\":\"Native\",\"Neosens\":\"Neosens\",\"New Balance\":\"New Balance\",\"New Lander\":\"New Lander\",\"New Look\":\"New Look\",\"New Rock\":\"New Rock\",\"NEXT\":\"NEXT\",\"Nicholas Deakins\":\"Nicholas Deakins\",\"Northwest\":\"Northwest\",\"O\u0027Neill\":\"O\u0027Neill\",\"Oakley\":\"Oakley\",\"Oaktrak\":\"Oaktrak\",\"OFFICE\":\"OFFICE\",\"Officine Creative\":\"Officine Creative\",\"Oliver Sweeney\":\"Oliver Sweeney\",\"OluKai\":\"OluKai\",\"Opening Ceremony\":\"Opening Ceremony\",\"ORCA BAY\":\"ORCA BAY\",\"Original Penguin\":\"Original Penguin\",\"Orlebar Brown\":\"Orlebar Brown\",\"Osiris\":\"Osiris\",\"Padders\":\"Padders\",\"Palladium\":\"Palladium\",\"Paolo Vandini\":\"Paolo Vandini\",\"Paraboot\":\"Paraboot\",\"Patrick Cox\":\"Patrick Cox\",\"Paul Smith\":\"Paul Smith\",\"PDQ\":\"PDQ\",\"Pepe Jeans\":\"Pepe Jeans\",\"Peter Werth\":\"Peter Werth\",\"Philippe Model\":\"Philippe Model\",\"Philipp Plein\":\"Philipp Plein\",\"Pierre Cardin\":\"Pierre Cardin\",\"Pikolinos\":\"Pikolinos\",\"PLIMS\":\"PLIMS\",\"Pod\":\"Pod\",\"Pointer Brand\":\"Pointer Brand\",\"Police\":\"Police\",\"Polo\":\"Polo\",\"Polo Ralph Lauren\":\"Polo Ralph Lauren\",\"Porsche\":\"Porsche\",\"Portwest\":\"Portwest\",\"Poste\":\"Poste\",\"PRADA\":\"PRADA\",\"Pretty Green\":\"Pretty Green\",\"Primark\":\"Primark\",\"Quayside\":\"Quayside\",\"Quiksilver\":\"Quiksilver\",\"Rachel Zoe\":\"Rachel Zoe\",\"RAF\":\"RAF\",\"Raf Simons\":\"Raf Simons\",\"Ralph Lauren\":\"Ralph Lauren\",\"Rare\":\"Rare\",\"Red Herring\":\"Red Herring\",\"Red or Dead\":\"Red or Dead\",\"Redskins\":\"Redskins\",\"Red Tape\":\"Red Tape\",\"Red Wing Shoes\":\"Red Wing Shoes\",\"Reef\":\"Reef\",\"REFRESH\":\"REFRESH\",\"Reiss\":\"Reiss\",\"Religion\":\"Religion\",\"Replay\":\"Replay\",\"Rick Owens\":\"Rick Owens\",\"Rider\":\"Rider\",\"Rieker\":\"Rieker\",\"River Island\":\"River Island\",\"Rivieras\":\"Rivieras\",\"RJR.John Rocha\":\"RJR.John Rocha\",\"Roamers\":\"Roamers\",\"Roberto Cavalli\":\"Roberto Cavalli\",\"Rockwood\":\"Rockwood\",\"ROCKY\":\"ROCKY\",\"Rohde\":\"Rohde\",\"Rombah Wallace\":\"Rombah Wallace\",\"Route 21\":\"Route 21\",\"Royal Elastics\":\"Royal Elastics\",\"Russell \u0026 Bromley\":\"Russell \u0026 Bromley\",\"s.Oliver\":\"s.Oliver\",\"Salomon\":\"Salomon\",\"Salvatore Ferragamo\":\"Salvatore Ferragamo\",\"Samuel Windsor\":\"Samuel Windsor\",\"Santoni\":\"Santoni\",\"Sanuk\":\"Sanuk\",\"SAS\":\"SAS\",\"Saucony\":\"Saucony\",\"Saxone\":\"Saxone\",\"Scape\":\"Scape\",\"SCARPA\":\"SCARPA\",\"Schmoove\":\"Schmoove\",\"Seafarer\":\"Seafarer\",\"Sebago\":\"Sebago\",\"Selected\":\"Selected\",\"Sendra\":\"Sendra\",\"Sergio Tacchini\":\"Sergio Tacchini\",\"Shape-Ups\":\"Shape-Ups\",\"Shoreside\":\"Shoreside\",\"Sioux\":\"Sioux\",\"Skechers\":\"Skechers\",\"Slazenger\":\"Slazenger\",\"SOLE\":\"SOLE\",\"Soletrader\":\"Soletrader\",\"Solovair\":\"Solovair\",\"SoulCal\u0026Co\":\"SoulCal\u0026Co\",\"Soviet\":\"Soviet\",\"Sparco\":\"Sparco\",\"Sperry Top-Sider\":\"Sperry Top-Sider\",\"Spot On\":\"Spot On\",\"Spring Court\":\"Spring Court\",\"Stacy Adams\":\"Stacy Adams\",\"Stampd\":\"Stampd\",\"Steve Madden\":\"Steve Madden\",\"Stormwells\":\"Stormwells\",\"Sugar\":\"Sugar\",\"Superdry\":\"Superdry\",\"Superga\":\"Superga\",\"SUPRA\":\"SUPRA\",\"Supreme\":\"Supreme\",\"SWEAR\":\"SWEAR\",\"SWIMS\":\"SWIMS\",\"T.U.K.\":\"T.U.K.\",\"TBS\":\"TBS\",\"Ted Baker\":\"Ted Baker\",\"Teva\":\"Teva\",\"The North Face\":\"The North Face\",\"The Simpsons\":\"The Simpsons\",\"Think\":\"Think\",\"Tinkerbell\":\"Tinkerbell\",\"Tod\u0027s\":\"Tod\u0027s\",\"Todd Barnes\":\"Todd Barnes\",\"Toggi\":\"Toggi\",\"Tommy Hilfiger\":\"Tommy Hilfiger\",\"Tom\u0027s\":\"Tom\u0027s\",\"Topman\":\"Topman\",\"Trespass\":\"Trespass\",\"Tretorn\":\"Tretorn\",\"Trickers\":\"Trickers\",\"Trussardi\":\"Trussardi\",\"Tsubo\":\"Tsubo\",\"TU\":\"TU\",\"UGG Australia\":\"UGG Australia\",\"UK Gear\":\"UK Gear\",\"Ultimo\":\"Ultimo\",\"Umbro\":\"Umbro\",\"Underground\":\"Underground\",\"Urban Beach\":\"Urban Beach\",\"US Brass\":\"US Brass\",\"US Polo Assn.\":\"US Polo Assn.\",\"Vagabond\":\"Vagabond\",\"valentino\":\"valentino\",\"Venice\":\"Venice\",\"Versace\":\"Versace\",\"Vibram\":\"Vibram\",\"VISVIM\":\"VISVIM\",\"Vivienne Westwood\":\"Vivienne Westwood\",\"VivoBarefoot\":\"VivoBarefoot\",\"Voi Jeans\":\"Voi Jeans\",\"Volcom\":\"Volcom\",\"Volta\":\"Volta\",\"WALKLANDER\":\"WALKLANDER\",\"Weird Fish\":\"Weird Fish\",\"Wenger\":\"Wenger\",\"Windsmoor\":\"Windsmoor\",\"Wolverine\":\"Wolverine\",\"Wood World\":\"Wood World\",\"Workforce\":\"Workforce\",\"Wrangler\":\"Wrangler\",\"Yachtsman\":\"Yachtsman\",\"Yves Saint Laurent\":\"Yves Saint Laurent\",\"Yuketen\":\"Yuketen\",\"Zara\":\"Zara\",\"Zedzzz\":\"Zedzzz\",\"Zoo York\":\"Zoo York\"},\"minValues\":1,\"maxValues\":1}},\"optional\":{\"Style\":{\"type\":\"textselect\",\"options\":{\"Lace-up\":\"Lace-up\",\"Deck Shoes\":\"Deck Shoes\",\"Loafers\":\"Loafers\",\"Moccasins\":\"Moccasins\",\"Espadrilles\":\"Espadrilles\",\"High Top\":\"High Top\",\"Clogs\":\"Clogs\"},\"minValues\":0,\"maxValues\":1},\"EU Shoe Size\":{\"type\":\"text\",\"options\":null,\"minValues\":0,\"maxValues\":1},\"Main Colour\":{\"type\":\"textselect\",\"options\":{\"Beige\":\"Beige\",\"Black\":\"Black\",\"Blue\":\"Blue\",\"Brown\":\"Brown\",\"Gold\":\"Gold\",\"Green\":\"Green\",\"Grey\":\"Grey\",\"Ivory\":\"Ivory\",\"Multi\":\"Multi\",\"Orange\":\"Orange\",\"Pink\":\"Pink\",\"Purple\":\"Purple\",\"Red\":\"Red\",\"Silver\":\"Silver\",\"White\":\"White\",\"Yellow\":\"Yellow\"},\"minValues\":0,\"maxValues\":1},\"Upper Material\":{\"type\":\"textselect\",\"options\":{\"100% Leather\":\"100% Leather\",\"Synthetic Leather\":\"Synthetic Leather\",\"Composition Leather\":\"Composition Leather\",\"Synthetic\":\"Synthetic\",\"Textile\":\"Textile\",\"Canvas\":\"Canvas\",\"Suede\":\"Suede\",\"Faux Suede\":\"Faux Suede\",\"Latex\":\"Latex\",\"Rubber\":\"Rubber\"},\"minValues\":0,\"maxValues\":1},\"Lining\":{\"type\":\"textselect\",\"options\":{\"100% Leather\":\"100% Leather\",\"Synthetic Leather\":\"Synthetic Leather\",\"Composition Leather\":\"Composition Leather\",\"Textile\":\"Textile\"},\"minValues\":0,\"maxValues\":1},\"Sole\":{\"type\":\"textselect\",\"options\":{\"100% Leather\":\"100% Leather\",\"Cork\":\"Cork\",\"Wood\":\"Wood\",\"Rubber\":\"Rubber\",\"Synthetic\":\"Synthetic\"},\"minValues\":0,\"maxValues\":1},\"Pattern\":{\"type\":\"textselect\",\"options\":{\"Animal Print\":\"Animal Print\",\"Camouflage\":\"Camouflage\",\"Floral\":\"Floral\",\"Herringbone\":\"Herringbone\",\"Paisley\":\"Paisley\",\"Polka Dot\":\"Polka Dot\",\"Solid\":\"Solid\",\"Striped\":\"Striped\"},\"minValues\":0,\"maxValues\":1},\"Product ID\":{\"type\":\"text\",\"options\":null,\"minValues\":0,\"maxValues\":1},\"Features\":{\"type\":\"textselect\",\"options\":{\"LED\":\"LED\",\"Slip Resistant\":\"Slip Resistant\"},\"minValues\":0,\"maxValues\":30},\"Product Line\":{\"type\":\"textselect\",\"options\":{\"4US\":\"4US\",\"7100\":\"7100\",\"A\/O\":\"A\/O\",\"Abenaki\":\"Abenaki\",\"Adante\":\"Adante\",\"AdiPrene\":\"AdiPrene\",\"A-Head\":\"A-Head\",\"Air Jet\":\"Air Jet\",\"Aleron\":\"Aleron\",\"Ali\u0027i\":\"Ali\u0027i\",\"Alisos\":\"Alisos\",\"Alki\":\"Alki\",\"Alley Cat\":\"Alley Cat\",\"Americas Cup\":\"Americas Cup\",\"Andover\":\"Andover\",\"Androw\":\"Androw\",\"Annapolis\":\"Annapolis\",\"Anthem\":\"Anthem\",\"Apm\":\"Apm\",\"Aramis\":\"Aramis\",\"Arcarde\":\"Arcarde\",\"Aristide\":\"Aristide\",\"Arlez\":\"Arlez\",\"Artifact\":\"Artifact\",\"Arverne\":\"Arverne\",\"Ascoli\":\"Ascoli\",\"Austin\":\"Austin\",\"Axle\":\"Axle\",\"Baduard\":\"Baduard\",\"Bahama\":\"Bahama\",\"Balenciaga Arena\":\"Balenciaga Arena\",\"Bali\":\"Bali\",\"Band of Outsiders\":\"Band of Outsiders\",\"Banni\":\"Banni\",\"Barrow\":\"Barrow\",\"Baxter\":\"Baxter\",\"Baya\":\"Baya\",\"Beckley\":\"Beckley\",\"Bellingham\":\"Bellingham\",\"Ben\":\"Ben\",\"Bex\":\"Bex\",\"Bidwell\":\"Bidwell\",\"Billfish\":\"Billfish\",\"Block Island\":\"Block Island\",\"Boardroom\":\"Boardroom\",\"Bobs\":\"Bobs\",\"Bocana\":\"Bocana\",\"Bonito\":\"Bonito\",\"Boulder\":\"Boulder\",\"Boundless\":\"Boundless\",\"Bracken\":\"Bracken\",\"Bradley\":\"Bradley\",\"Brawley\":\"Brawley\",\"Brisbane\":\"Brisbane\",\"Brockman\":\"Brockman\",\"Brook Lin\":\"Brook Lin\",\"Calliere\":\"Calliere\",\"Campsides\":\"Campsides\",\"Candido\":\"Candido\",\"Cape Horn\":\"Cape Horn\",\"Cape Noble\":\"Cape Noble\",\"Cap Vert\":\"Cap Vert\",\"Carver\":\"Carver\",\"Cascadia\":\"Cascadia\",\"Castera\":\"Castera\",\"Cesario\":\"Cesario\",\"C-Good\":\"C-Good\",\"Chill\":\"Chill\",\"Chill Out\":\"Chill Out\",\"City Adventure\":\"City Adventure\",\"City Endurance\":\"City Endurance\",\"City Hiker\":\"City Hiker\",\"City Trails\":\"City Trails\",\"Citywalk\":\"Citywalk\",\"Clavel\":\"Clavel\",\"Claw King\":\"Claw King\",\"Clemente\":\"Clemente\",\"Clovehitch\":\"Clovehitch\",\"Coastal Cruisers\":\"Coastal Cruisers\",\"Cobbler\":\"Cobbler\",\"Collins\":\"Collins\",\"Concours\":\"Concours\",\"Cool Cat\":\"Cool Cat\",\"Cooper\":\"Cooper\",\"Corbon\":\"Corbon\",\"Core\":\"Core\",\"Core Mie\":\"Core Mie\",\"Costner\":\"Costner\",\"Cove\":\"Cove\",\"Creons\":\"Creons\",\"Cross\":\"Cross\",\"CVO\":\"CVO\",\"D-78\":\"D-78\",\"Deane\":\"Deane\",\"Deauville\":\"Deauville\",\"Deckhand\":\"Deckhand\",\"Defender\":\"Defender\",\"Delmont\":\"Delmont\",\"Denver\":\"Denver\",\"Derek\":\"Derek\",\"Devario\":\"Devario\",\"Diameter\":\"Diameter\",\"Dillon\":\"Dillon\",\"DMX\":\"DMX\",\"Doby\":\"Doby\",\"Docksides\":\"Docksides\",\"Donny\":\"Donny\",\"Dr. Martens 1461\":\"Dr. Martens 1461\",\"Dreyfus\":\"Dreyfus\",\"Duet Sport\":\"Duet Sport\",\"Durant\":\"Durant\",\"Eagle Loop\":\"Eagle Loop\",\"Earl\":\"Earl\",\"EarthKeepers\":\"EarthKeepers\",\"Eastbend\":\"Eastbend\",\"Eastport\":\"Eastport\",\"Eberdon\":\"Eberdon\",\"Eclectic\":\"Eclectic\",\"Edlef\":\"Edlef\",\"Edwin\":\"Edwin\",\"Energy\":\"Energy\",\"Escalade\":\"Escalade\",\"ETraveler\":\"ETraveler\",\"Eureka\":\"Eureka\",\"Europa\":\"Europa\",\"Expressed Kagan\":\"Expressed Kagan\",\"Faxon\":\"Faxon\",\"FBT\":\"FBT\",\"Felix\":\"Felix\",\"Finlay\":\"Finlay\",\"Folk\":\"Folk\",\"Footprints\":\"Footprints\",\"Frisco\":\"Frisco\",\"Fusion\":\"Fusion\",\"Futur\":\"Futur\",\"Gardener\":\"Gardener\",\"Garonne\":\"Garonne\",\"Garzo\":\"Garzo\",\"Gaston\":\"Gaston\",\"Gastria\":\"Gastria\",\"Gavin\":\"Gavin\",\"Genesis\":\"Genesis\",\"Gil\":\"Gil\",\"Gold Cup\":\"Gold Cup\",\"GoWalk\":\"GoWalk\",\"Grazer\":\"Grazer\",\"Greenbrook\":\"Greenbrook\",\"Groovy\":\"Groovy\",\"Gulliver\":\"Gulliver\",\"Gunner\":\"Gunner\",\"Gunsmoke\":\"Gunsmoke\",\"Gus\":\"Gus\",\"Hallandale\":\"Hallandale\",\"Halyard\":\"Halyard\",\"Haneda\":\"Haneda\",\"Hanford\":\"Hanford\",\"Harborline\":\"Harborline\",\"Harold\":\"Harold\",\"Heritage\":\"Heritage\",\"Hike\":\"Hike\",\"Hover\":\"Hover\",\"Howland\":\"Howland\",\"Humboldt\":\"Humboldt\",\"Hurrikan\":\"Hurrikan\",\"Ice Cool\":\"Ice Cool\",\"Ilgar\":\"Ilgar\",\"Impression\":\"Impression\",\"Invasion\":\"Invasion\",\"Islander\":\"Islander\",\"Islander Sport\":\"Islander Sport\",\"Itravel\":\"Itravel\",\"Jeffrey\":\"Jeffrey\",\"Jenson\":\"Jenson\",\"Jink\":\"Jink\",\"Joyful\":\"Joyful\",\"Jungle Moc\":\"Jungle Moc\",\"Kaleb\":\"Kaleb\",\"Kama\u0027aina\":\"Kama\u0027aina\",\"Kash\":\"Kash\",\"Keagan\":\"Keagan\",\"Keep\":\"Keep\",\"Kikko\":\"Kikko\",\"Killick\":\"Killick\",\"Kono\":\"Kono\",\"Korbin\":\"Korbin\",\"Kyoto\":\"Kyoto\",\"L27\":\"L27\",\"Lakewood\":\"Lakewood\",\"Lamarck\":\"Lamarck\",\"Lander\":\"Lander\",\"Largo\":\"Largo\",\"LaSelle\":\"LaSelle\",\"Leeward\":\"Leeward\",\"Lennox\":\"Lennox\",\"Leon\":\"Leon\",\"Linden\":\"Linden\",\"Lokahi\":\"Lokahi\",\"Loop\":\"Loop\",\"Lowday\":\"Lowday\",\"Lugger\":\"Lugger\",\"Lumberjack\":\"Lumberjack\",\"Lunargrand\":\"Lunargrand\",\"Madison Summit\":\"Madison Summit\",\"Magnete\":\"Magnete\",\"Mako\":\"Mako\",\"Mall Walker\":\"Mall Walker\",\"Malory\":\"Malory\",\"Mansell\":\"Mansell\",\"Mariner\":\"Mariner\",\"Marling\":\"Marling\",\"Match\":\"Match\",\"Matsudo\":\"Matsudo\",\"Merric\":\"Merric\",\"Midday\":\"Midday\",\"Misano\":\"Misano\",\"Moloa\":\"Moloa\",\"Monroe\":\"Monroe\",\"Montoyas\":\"Montoyas\",\"Mountain\":\"Mountain\",\"Mully\":\"Mully\",\"Mush\":\"Mush\",\"Mwt\":\"Mwt\",\"Natureveldt\":\"Natureveldt\",\"Nautic\":\"Nautic\",\"Navigator\":\"Navigator\",\"Nebulae\":\"Nebulae\",\"Newman\":\"Newman\",\"Newton\":\"Newton\",\"Nopo\":\"Nopo\",\"Northfield\":\"Northfield\",\"Originals\":\"Originals\",\"Orrick\":\"Orrick\",\"Overboard\":\"Overboard\",\"Overhaul\":\"Overhaul\",\"Padmore\":\"Padmore\",\"Perth\":\"Perth\",\"Peyton\":\"Peyton\",\"Pickett\":\"Pickett\",\"Pinch\":\"Pinch\",\"Planfix\":\"Planfix\",\"Portland 2 Tie\":\"Portland 2 Tie\",\"Prichard\":\"Prichard\",\"Privo\":\"Privo\",\"Protect\":\"Protect\",\"Prowalker\":\"Prowalker\",\"Rally\":\"Rally\",\"Rantus\":\"Rantus\",\"Realtree\":\"Realtree\",\"Reefton\":\"Reefton\",\"Reminisce\":\"Reminisce\",\"Remote\":\"Remote\",\"Remy\":\"Remy\",\"Resolution\":\"Resolution\",\"Retrospect\":\"Retrospect\",\"Riveto\":\"Riveto\",\"Robson\":\"Robson\",\"Roderick\":\"Roderick\",\"Ronnie Fieg\":\"Ronnie Fieg\",\"Roxford\":\"Roxford\",\"Runoff\":\"Runoff\",\"Rylander\":\"Rylander\",\"Sander\":\"Sander\",\"Sanson\":\"Sanson\",\"Santa Barbara\":\"Santa Barbara\",\"Santa Cruz\":\"Santa Cruz\",\"Saranac\":\"Saranac\",\"Schooner\":\"Schooner\",\"Seacoast\":\"Seacoast\",\"Seamate\":\"Seamate\",\"Seaport\":\"Seaport\",\"Seawalker\":\"Seawalker\",\"Sedona\":\"Sedona\",\"Seeley\":\"Seeley\",\"Shakespeare\":\"Shakespeare\",\"Sherbrooke\":\"Sherbrooke\",\"Shore Leave\":\"Shore Leave\",\"Shunami\":\"Shunami\",\"Sidewalk Surfer\":\"Sidewalk Surfer\",\"Slayer\":\"Slayer\",\"Slip-On\":\"Slip-On\",\"Solar\":\"Solar\",\"Solarsoft\":\"Solarsoft\",\"Soulwolf\":\"Soulwolf\",\"Spinnaker\":\"Spinnaker\",\"SPM\":\"SPM\",\"Standard\":\"Standard\",\"Stanley\":\"Stanley\",\"Stanton\":\"Stanton\",\"Stingray\":\"Stingray\",\"Stowaway\":\"Stowaway\",\"Strategy\":\"Strategy\",\"Supreme\":\"Supreme\",\"Surfjitsu\":\"Surfjitsu\",\"Swerve\":\"Swerve\",\"Take\":\"Take\",\"Taloire\":\"Taloire\",\"Telesio\":\"Telesio\",\"Tell\":\"Tell\",\"Telly\":\"Telly\",\"Terence\":\"Terence\",\"Tevere\":\"Tevere\",\"Thompson\":\"Thompson\",\"Thor\":\"Thor\",\"Thurston\":\"Thurston\",\"Tideline\":\"Tideline\",\"Timberland Boot Company\":\"Timberland Boot Company\",\"Time Out\":\"Time Out\",\"Timmons\":\"Timmons\",\"Tom Cats\":\"Tom Cats\",\"Topa\":\"Topa\",\"Touareg\":\"Touareg\",\"Tourelle\":\"Tourelle\",\"Track\":\"Track\",\"Tracker\":\"Tracker\",\"Tremont\":\"Tremont\",\"Triton\":\"Triton\",\"TruWalk\":\"TruWalk\",\"Tucker Venetian\":\"Tucker Venetian\",\"Urbantrack\":\"Urbantrack\",\"Vagabond\":\"Vagabond\",\"Vanowen\":\"Vanowen\",\"Vaughn\":\"Vaughn\",\"Venture\":\"Venture\",\"Versova\":\"Versova\",\"Vexation\":\"Vexation\",\"Vicars\":\"Vicars\",\"Vico\":\"Vico\",\"Villain\":\"Villain\",\"Vito\":\"Vito\",\"Wallabees\":\"Wallabees\",\"Wallace\":\"Wallace\",\"Walu\":\"Walu\",\"Wave\":\"Wave\",\"Wayne\":\"Wayne\",\"Weaver\":\"Weaver\",\"Wentworth\":\"Wentworth\",\"Wilbert\":\"Wilbert\",\"Winns\":\"Winns\",\"Winter\":\"Winter\",\"Winthrop\":\"Winthrop\",\"Wish\":\"Wish\",\"World\":\"World\",\"World Tour\":\"World Tour\",\"XC4\":\"XC4\",\"Xcs\":\"Xcs\",\"Yukon\":\"Yukon\",\"Zale\":\"Zale\",\"Zeno\":\"Zeno\",\"Zerogrand\":\"Zerogrand\"},\"minValues\":0,\"maxValues\":1},\"Width\":{\"type\":\"textselect\",\"options\":{\"X-Narrow (4A)\":\"X-Narrow (4A)\",\"Narrow (2A)\":\"Narrow (2A)\",\"Standard (B)\":\"Standard (B)\",\"Standard (D)\":\"Standard (D)\",\"Wide (E)\":\"Wide (E)\",\"Wide (EE)\":\"Wide (EE)\",\"Extra Wide (EEE)\":\"Extra Wide (EEE)\",\"Ultra WIDE (EEEE)\":\"Ultra WIDE (EEEE)\",\"Ultra WIDE (EEEEE)\":\"Ultra WIDE (EEEEE)\"},\"minValues\":0,\"maxValues\":1},\"MPN\":{\"type\":\"text\",\"options\":null,\"minValues\":0,\"maxValues\":1},\"Country\/Region of Manufacture\":{\"type\":\"select\",\"options\":{\"Unknown\":\"Unknown\",\"Afghanistan\":\"Afghanistan\",\"Albania\":\"Albania\",\"Algeria\":\"Algeria\",\"American Samoa\":\"American Samoa\",\"Andorra\":\"Andorra\",\"Angola\":\"Angola\",\"Anguilla\":\"Anguilla\",\"Antigua and Barbuda\":\"Antigua and Barbuda\",\"Argentina\":\"Argentina\",\"Armenia\":\"Armenia\",\"Aruba\":\"Aruba\",\"Australia\":\"Australia\",\"Austria\":\"Austria\",\"Azerbaijan\":\"Azerbaijan\",\"Bahamas\":\"Bahamas\",\"Bahrain\":\"Bahrain\",\"Bangladesh\":\"Bangladesh\",\"Barbados\":\"Barbados\",\"Belarus\":\"Belarus\",\"Belgium\":\"Belgium\",\"Belize\":\"Belize\",\"Benin\":\"Benin\",\"Bermuda\":\"Bermuda\",\"Bhutan\":\"Bhutan\",\"Bolivia\":\"Bolivia\",\"Bosnia and Herzegovina\":\"Bosnia and Herzegovina\",\"Botswana\":\"Botswana\",\"Brazil\":\"Brazil\",\"British Indian Ocean Territory\":\"British Indian Ocean Territory\",\"Brunei Darussalam\":\"Brunei Darussalam\",\"Bulgaria\":\"Bulgaria\",\"Burkina Faso\":\"Burkina Faso\",\"Burundi\":\"Burundi\",\"Cambodia\":\"Cambodia\",\"Cameroon\":\"Cameroon\",\"Canada\":\"Canada\",\"Cape Verde\":\"Cape Verde\",\"Cayman Islands\":\"Cayman Islands\",\"Central African Republic\":\"Central African Republic\",\"Chad\":\"Chad\",\"Chile\":\"Chile\",\"China\":\"China\",\"Christmas Island\":\"Christmas Island\",\"Cocos (Keeling) Islands\":\"Cocos (Keeling) Islands\",\"Colombia\":\"Colombia\",\"Comoros\":\"Comoros\",\"Congo\":\"Congo\",\"Congo, The Democratic Republic of the\":\"Congo, The Democratic Republic of the\",\"Cook Islands\":\"Cook Islands\",\"Costa Rica\":\"Costa Rica\",\"C\u00f4te d\u2019Ivoire\":\"C\u00f4te d\u2019Ivoire\",\"Croatia\":\"Croatia\",\"Cyprus\":\"Cyprus\",\"Czech Republic\":\"Czech Republic\",\"Denmark\":\"Denmark\",\"Djibouti\":\"Djibouti\",\"Dominica\":\"Dominica\",\"Dominican Republic\":\"Dominican Republic\",\"Ecuador\":\"Ecuador\",\"Egypt\":\"Egypt\",\"El Salvador\":\"El Salvador\",\"Equatorial Guinea\":\"Equatorial Guinea\",\"Eritrea\":\"Eritrea\",\"Estonia\":\"Estonia\",\"Falkland Islands\":\"Falkland Islands\",\"Ethiopia\":\"Ethiopia\",\"Faroe Islands\":\"Faroe Islands\",\"Fiji\":\"Fiji\",\"Finland\":\"Finland\",\"France\":\"France\",\"French Guiana\":\"French Guiana\",\"French Polynesia Includes Tahiti\":\"French Polynesia Includes Tahiti\",\"Gabon\":\"Gabon\",\"Gambia\":\"Gambia\",\"Georgia\":\"Georgia\",\"Germany\":\"Germany\",\"Ghana\":\"Ghana\",\"Gibraltar\":\"Gibraltar\",\"Greece\":\"Greece\",\"Greenland\":\"Greenland\",\"Grenada\":\"Grenada\",\"Guadeloupe\":\"Guadeloupe\",\"Guam\":\"Guam\",\"Guatemala\":\"Guatemala\",\"Guernsey\":\"Guernsey\",\"Guinea\":\"Guinea\",\"Guinea-Bissau\":\"Guinea-Bissau\",\"Guyana\":\"Guyana\",\"Haiti\":\"Haiti\",\"Holy See (Vatican City State)\":\"Holy See (Vatican City State)\",\"Honduras\":\"Honduras\",\"Hong Kong\":\"Hong Kong\",\"Hungary\":\"Hungary\",\"Iceland\":\"Iceland\",\"India\":\"India\",\"Indonesia\":\"Indonesia\",\"Iraq\":\"Iraq\",\"Ireland\":\"Ireland\",\"Israel\":\"Israel\",\"Italy\":\"Italy\",\"Jamaica\":\"Jamaica\",\"Japan\":\"Japan\",\"Jersey\":\"Jersey\",\"Jordan\":\"Jordan\",\"Kazakhstan\":\"Kazakhstan\",\"Kenya\":\"Kenya\",\"Kiribati\":\"Kiribati\",\"Korea, Republic of\":\"Korea, Republic of\",\"Kuwait\":\"Kuwait\",\"Kyrgyzstan\":\"Kyrgyzstan\",\"Lao People\u0027s Democratic Republic\":\"Lao People\u0027s Democratic Republic\",\"Latvia\":\"Latvia\",\"Lebanon\":\"Lebanon\",\"Lesotho\":\"Lesotho\",\"Liberia\":\"Liberia\",\"Libyan Arab Jamahiriya\":\"Libyan Arab Jamahiriya\",\"Liechtenstein\":\"Liechtenstein\",\"Lithuania\":\"Lithuania\",\"Luxembourg\":\"Luxembourg\",\"Macao\":\"Macao\",\"Macedonia, the Former Yugoslav Republic of\":\"Macedonia, the Former Yugoslav Republic of\",\"Madagascar\":\"Madagascar\",\"Malawi\":\"Malawi\",\"Malaysia\":\"Malaysia\",\"Maldives\":\"Maldives\",\"Mali\":\"Mali\",\"Malta\":\"Malta\",\"Marshall Islands\":\"Marshall Islands\",\"Martinique\":\"Martinique\",\"Mauritania\":\"Mauritania\",\"Mauritius\":\"Mauritius\",\"Mayotte\":\"Mayotte\",\"Mexico\":\"Mexico\",\"Micronesia, Federated States of\":\"Micronesia, Federated States of\",\"Moldova, Republic of\":\"Moldova, Republic of\",\"Monaco\":\"Monaco\",\"Mongolia\":\"Mongolia\",\"Montenegro\":\"Montenegro\",\"Montserrat\":\"Montserrat\",\"Morocco\":\"Morocco\",\"Mozambique\":\"Mozambique\",\"Myanmar\":\"Myanmar\",\"Namibia\":\"Namibia\",\"Nauru\":\"Nauru\",\"Nepal\":\"Nepal\",\"Netherlands\":\"Netherlands\",\"Netherlands Antilles\":\"Netherlands Antilles\",\"New Caledonia\":\"New Caledonia\",\"New Zealand\":\"New Zealand\",\"Nicaragua\":\"Nicaragua\",\"Niger\":\"Niger\",\"Nigeria\":\"Nigeria\",\"Niue\":\"Niue\",\"Norfolk Island\":\"Norfolk Island\",\"Northern Mariana Islands\":\"Northern Mariana Islands\",\"Norway\":\"Norway\",\"Oman\":\"Oman\",\"Pakistan\":\"Pakistan\",\"Palau\":\"Palau\",\"Palestinian Territories\":\"Palestinian Territories\",\"Panama\":\"Panama\",\"Papua New Guinea\":\"Papua New Guinea\",\"Paraguay\":\"Paraguay\",\"Peru\":\"Peru\",\"Philippines\":\"Philippines\",\"Pitcairn\":\"Pitcairn\",\"Poland\":\"Poland\",\"Portugal\":\"Portugal\",\"Puerto Rico\":\"Puerto Rico\",\"Qatar\":\"Qatar\",\"Reunion\":\"Reunion\",\"Romania\":\"Romania\",\"Russian Federation\":\"Russian Federation\",\"Rwanda\":\"Rwanda\",\"Saint Helena\":\"Saint Helena\",\"Saint Kitts and Nevis\":\"Saint Kitts and Nevis\",\"Saint Lucia\":\"Saint Lucia\",\"Saint Pierre and Miquelon\":\"Saint Pierre and Miquelon\",\"Saint Vincent and the Grenadines\":\"Saint Vincent and the Grenadines\",\"Samoa\":\"Samoa\",\"San Marino\":\"San Marino\",\"Sao Tome and Principe\":\"Sao Tome and Principe\",\"Saudi Arabia\":\"Saudi Arabia\",\"Senegal\":\"Senegal\",\"Serbia\":\"Serbia\",\"Seychelles\":\"Seychelles\",\"Sierra Leone\":\"Sierra Leone\",\"Singapore\":\"Singapore\",\"Slovakia\":\"Slovakia\",\"Slovenia\":\"Slovenia\",\"Solomon Islands\":\"Solomon Islands\",\"Somalia\":\"Somalia\",\"South Africa\":\"South Africa\",\"Spain\":\"Spain\",\"Sri Lanka\":\"Sri Lanka\",\"Suriname\":\"Suriname\",\"Svalbard and Jan Mayen\":\"Svalbard and Jan Mayen\",\"Swaziland\":\"Swaziland\",\"Sweden\":\"Sweden\",\"Switzerland\":\"Switzerland\",\"Taiwan\":\"Taiwan\",\"Tajikistan\":\"Tajikistan\",\"Tanzania, United Republic of\":\"Tanzania, United Republic of\",\"Thailand\":\"Thailand\",\"Togo\":\"Togo\",\"Tokelau\":\"Tokelau\",\"Tonga\":\"Tonga\",\"Trinidad and Tobago\":\"Trinidad and Tobago\",\"Tunisia\":\"Tunisia\",\"Turkey\":\"Turkey\",\"Turkmenistan\":\"Turkmenistan\",\"Turks and Caicos Islands\":\"Turks and Caicos Islands\",\"Tuvalu\":\"Tuvalu\",\"Uganda\":\"Uganda\",\"Ukraine\":\"Ukraine\",\"United Arab Emirates\":\"United Arab Emirates\",\"United Kingdom\":\"United Kingdom\",\"United States\":\"United States\",\"Uruguay\":\"Uruguay\",\"Uzbekistan\":\"Uzbekistan\",\"Vanuatu\":\"Vanuatu\",\"Venezuela\":\"Venezuela\",\"Vietnam\":\"Vietnam\",\"Virgin Islands, British\":\"Virgin Islands, British\",\"Virgin Islands, U S\":\"Virgin Islands, U S\",\"Wallis and Futuna\":\"Wallis and Futuna\",\"Yemen\":\"Yemen\",\"Zambia\":\"Zambia\",\"Zimbabwe\":\"Zimbabwe\"},\"minValues\":0,\"maxValues\":1}}},\"bodyTag\":[]}", 1));
        }
        try {
            return $this->buildResponse(
                $this->channelService->getCategoryDependentValues(
                    $this->fetchAccountFromRoute(), $this->getCategoryIdFromRoute()
                )
            );
        } catch (ListingException $e) {
            return $this->buildErrorResponse($e->getMessage());
        } catch (\Throwable $e) {
            return $this->buildGenericErrorResponse();
        }
    }

    public function categoryChildrenAction()
    {
        try {
            return $this->buildResponse([
                'categories' => $this->channelService->getCategoryChildrenForCategoryAndAccount(
                    $this->fetchAccountFromRoute(), $this->getCategoryIdFromRoute()
                )
            ]);
        } catch (ListingException $e) {
            return $this->buildErrorResponse($e->getMessage());
        } catch (\Throwable $e) {
            return $this->buildGenericErrorResponse();
        }
    }

    public function refreshCategoriesAction()
    {
        try {
            return $this->buildResponse([
                'categories' => $this->channelService->refetchAndSaveCategories($this->fetchAccountFromRoute())
            ]);
        } catch (ListingException $e) {
            return $this->buildErrorResponse($e->getMessage());
        } catch (\Throwable $e) {
            return $this->buildGenericErrorResponse();
        }
    }

    protected function fetchAccountFromRoute(): Account
    {
        return $this->fetchAccountById($this->params()->fromRoute('accountId', 0));
    }

    protected function fetchAccountById(int $accountId): Account
    {
        try {
            return $this->accountService->fetch($accountId);
        } catch (NotFound $e) {
            throw new ListingException('The account ' . $accountId . ' could not be found.');
        } catch (PermissionException $e) {
            throw new ListingException('The account ID ' . $accountId . ' is not valid');
        }
    }

    protected function buildGenericErrorResponse()
    {
        return $this->buildErrorResponse('An error has occurred. Please try again');
    }

    protected function getCategoryIdFromRoute(): string
    {
        return (int) $this->params()->fromRoute('categoryId', -1);
    }
}
