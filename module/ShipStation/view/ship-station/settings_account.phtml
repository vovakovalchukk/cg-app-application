<?php
use CG\ShipStation\Account as ShipStationAccountService;
use CG_Channel\Module as ChannelModule;
use ShipStation\Module;

// Deliberately not rendering the 'Renew Connection' button as ShipStation don't allow it
/*
$setupRoute = implode('/', [
    Module::ROUTE,
    ShipStationAccountService::ROUTE_SETUP
]);
$url = $this->url($setupRoute, ['channel' => $account->getChannel()]) . '?accountId=' . $account->getId();
echo $this->partial(ChannelModule::TEMPLATE_TOKEN_RENEWAL_HREF, compact('account', 'form', 'route', 'url'));
*/
?>
<div class="module clearfix shippingLedger usps">
    <?=$this->accountTopUp?>
</div>
<?php if (! empty($clearbooksStatementUrl)) : ?>
    <div class="module clearfix">
        <span class="heading-large heading-spacing">Full ClearBooks Statement</span>
        <iframe src="<?= $clearbooksStatementUrl ?>" class="clearbooks-statement-url-frame"></iframe>
    </div>
<?php endif; ?>
<script type="text/javascript">
    require(['<?=ShipStation\Module::PUBLIC_FOLDER;?>/js/Account/Settings.js'], function(Settings)
    {
        $(document).ready(function() {
            new Settings({"accountId": <?=$account->getId();?>});
        });
    });
</script>