<script type="text/javascript">
$(document).ready(function()
{
    // This needs to happen immediately, can't wait for require()
    $('#datatable').on('before-cgdatatable-init', function()
    {
        $('#datatable').on("fnServerData", function(event, sSource, aoData, fnCallback, oSettings)
        {
            var orderIds = <?=json_encode($this->orderIds);?>;
            for (var count in orderIds)
            {
                aoData.push({
                    'name': 'order['+count+']',
                    'value': orderIds[count]
                });
            }
        });
        var courierOptions = <?=json_encode(array_values($this->courierOptions));?>;
        $('#datatable').on('xhr', function(event, settings, json)
        {
            for (var count in json.Records) {
                json.Records[count].courierOptions = [];
                for (var key in courierOptions) {
                    var current = courierOptions[key];
                    if (json.Records[count].courier == key) {
                        current.selected = true;
                    }
                    json.Records[count].courierOptions.push(current);
                }
            }
        });
    });

    require(['<?=Orders\Module::PUBLIC_FOLDER;?>js/Courier/Review/Service.js'], function(Service)
    {
        var service = new Service($('#datatable'));
    });
});
</script>
<div id="main" class="no-sidebar courier-review">
    <span class="heading-large">
        <?= $this->translate('Review Orders') ?>
        <div class="heading-buttons">
            <?= $this->continueButton; ?>
        </div>
    </span>
    <div id="datatable-container">
        <?= $this->reviewTable; ?>
    </div>
</div>

<style>
<?php /* This is a hack to hide the sidebar away for now */ ?>
#main-wrapper {
    margin-left:0px;
    width:100%;
}
</style>