<?php $this->inlineScript()->captureStart(); ?>
require.config({
    paths: {
        filters: "<?= Orders\Module::PUBLIC_FOLDER ?>js/filters",
        
    }
});
require([
    'filters'
],
function(Filters) {
    new Filters("#filters", "#statusFilters");
   
});

<?php $this->inlineScript()->captureEnd(); ?>

<div class="filter-module clearfix navbar-content">
    <ul class="module-content nav">
        <li>
            <span class="heading-medium"><?= $this->translate('Status Filters') ?></span>
            <ul id="statusFilters">
                <li class='empty-list<?= count($filters) ? ' hidden' : '' ?>'><?= $this->translate('No status filters') ?></li>
                <?php if (count($filters)) : ?>
                    <?= $this->mustacheLoop('elements/statusFilter.mustache', $filters) ?>
                <?php endif; ?>
            </ul>
        </li>
    </ul>
    <div></div>
</div>



<script>
function orderCountsByAjax(organisationUnitId) {

    var d = new Date();
    var n = d.getTime();
    var dataString = +'&time=' + n;
    $.ajax
            ({
                type: 'POST',
                url: '/orders/orderCounts/' + organisationUnitId,
                data: dataString,
                cache: false,
                success: function (json)
                {
                    displayCounts(json);
                },
                error: function()
                {
                    alert('order count request failed');
                }
            });
}

function displayCounts(json) {

    var status = json.status;
    $('#allOrdersCount').html(status.allOrders);
    $('#awaitingPaymentCount').html(status.awaitingPayment);
    $('#newOrdersCount').html(status.newOrders);
    $('#processingCount').html(status.processing);
    $('#dispatchedCount').html(status.dispatched);
    $('#cancelledAndRefundedCount').html(status.cancelledAndRefunded);

    var maxCount = 0;
    var batches = json.batches;
    var batchesKeys = Object.keys(batches);
    for (var b = 0; b < batchesKeys.length; b++) {
        var batchId = batchesKeys[b];
        var batchesSpanId = "batchCount-" + batchId;
        var count = batches[batchId];
        if(count > maxCount){maxCount = count;}
        $('#' + batchesSpanId).html(count);
    }

changeMarginOfDeleteCrossBasedOnBatchCountStringLength(maxCount);

}



function changeMarginOfDeleteCrossBasedOnBatchCountStringLength(maxCount){

var currentRight = $('.deletebatch').css("right").slice(0,-2);
alert("currentRight:" + currentRight);
var length = maxCount.toString().length;

 //$('.deletebatch').css("right","100px");


}

  $( document ).ready(function() {

       orderCountsByAjax(2);
      
    });
    
</script>