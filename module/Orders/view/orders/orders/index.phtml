<?php $this->inlineScript()->captureStart(); ?>
require([
    "showHideFilters"
],
function(showHideFilters) {
    var orderPage = new showHideFilters();
});
require.config({
    paths: {
        'Filters': "<?= $this->basePath() . Filters\Module::PUBLIC_FOLDER . 'js';?>",
        'Orders': "<?= $this->basePath() . Orders\Module::PUBLIC_FOLDER . 'js';?>"
    }
});
require(["Filters/FilterCollection"], function(filterCollection) {
    var filterNames = {
<?php
    foreach ($filterNames as $index => $filterName) {
        echo $filterName . ": '" . $filterName . "', ";
    }
?>
    };
    filterCollection.setFilters(filterNames);
});
require(["tooltip"], function(Tooltip) {
    var buyerMessageTooltip = new Tooltip(
        "#datatable-container",
        ".buyer-message-holder",
        function() {
            return $(this).attr("title");
        }
    );

    var giftMessageTooltipTemplate = '/cg-built/orders/template/columns/giftMessage/tooltip.mustache';
    CGMustache.get().fetchTemplate(
        giftMessageTooltipTemplate,
        function(template, cgmustache) {
            var giftMessageTooltip = new Tooltip(
                "#datatable-container",
                ".gift-message-holder",
                function() {
                    var giftMessages = $(this).data("gift-messages");
                    if (typeof(giftMessages) !== "object" || !giftMessages.length) {
                        return "";
                    }

                    var counter = 0;
                    var seperator =  function(text, renderer) {
                        if (counter++ > 0) {
                            return renderer(text);
                        }
                        return "";
                    };

                    return cgmustache.renderTemplate(
                        template,
                        {
                            'giftMessages': giftMessages,
                            'seperator': function() { return seperator; }
                        }
                    );
                }
            );
        }
    );
});
<?php $this->inlineScript()->captureEnd(); ?>
<?php $this->headScript()->appendFile($this->basePath() . CG_UI\Module::PUBLIC_FOLDER . 'js/jqueryPlugin/cg-pjax.js'); ?>
<?php $this->headScript()->appendFile($this->basePath() . Filters\Module::PUBLIC_FOLDER . 'js/dataTableFilters.js'); ?>
<?php $this->placeholder('#main.class')->append('full-width'); ?>
<?php $this->placeholder('#sub-header')->append($filters); ?>
<?php
$this->placeholder('#sidebar')
    ->append($this->statusFiltersSidebar)
    ->append($this->storedFiltersSidebar)
    ->append($this->batches);
?>
<div id="main" class="transition-preload module clearfix<?= $this->placeholder('#main.class')->setPrefix(' ')->setIndent(1) ?>">
<?= $this->breadcrumbs; ?>
<?= $this->bulkItems; ?>
<div id="datatable-container">
    <?= $this->ordersTable; ?>
</div>
<a href="/orders/new">
    <div id="new-order-nav-icon">
        <span class="sprite-sprite sprite-clipboard-23-white"></span>
    </div>
</a>